#!/bin/sh

# Get the commit message
commit_message=$(cat "$1")

# Define the regex pattern for conventional commits
pattern="^(feat|fix|docs|style|refactor|perf|test|chore|ci|build|revert)(\(.+\))?: .{1,}$"

# Check if commit message matches the pattern
if ! echo "$commit_message" | grep -qE "$pattern"; then
  echo ""
  echo "âŒ Invalid commit message format!"
  echo ""
  echo "ğŸ“ Your commit message should follow the Conventional Commits format:"
  echo "   <type>[optional scope]: <description>"
  echo ""
  echo "ğŸ“‹ Valid types are:"
  echo "   â€¢ feat:     New features"
  echo "   â€¢ fix:      Bug fixes"
  echo "   â€¢ docs:     Documentation changes"
  echo "   â€¢ style:    Code style changes (formatting, etc.)"
  echo "   â€¢ refactor: Code restructuring without functionality changes"
  echo "   â€¢ perf:     Performance improvements"
  echo "   â€¢ test:     Adding or updating tests"
  echo "   â€¢ chore:    Maintenance tasks, dependency updates"
  echo "   â€¢ ci:       CI/CD configuration changes"
  echo "   â€¢ build:    Build system changes"
  echo "   â€¢ revert:   Reverting previous commits"
  echo ""
  echo "âœ… Examples:"
  echo "   feat: add user authentication"
  echo "   fix: resolve carousel navigation bug"
  echo "   docs: update API documentation"
  echo "   feat(auth): implement login functionality"
  echo ""
  echo "ğŸš« Your message: '$commit_message'"
  echo ""
  exit 1
fi

echo "âœ… Commit message format is valid!"
